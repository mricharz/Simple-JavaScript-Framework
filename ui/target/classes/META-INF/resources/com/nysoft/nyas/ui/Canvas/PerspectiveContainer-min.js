jQuery.require("com.nysoft.nyas.core.BaseObject");jQuery.require("com.nysoft.nyas.ui.Canvas.Vector");com.nysoft.nyas.core.BaseObject.extend("com.nysoft.nyas.ui.Canvas.PerspectiveContainer",{meta:{layerCount:"number",depth:"number"},init:function(a){this.setProperties(a);(!this.getLayerCount())&&this.setLayerCount(10);(!this.getDepth())&&this.setDepth(20);window.addEventListener("deviceorientation",jQuery.proxy(function(b){this.onRotate(b,b.alpha,b.beta,b.gamma)},this),false);this.g=0;this.b=0;this.objects=[]},addObject:function(a){this.objects.push(a)},onRotate:function(f,d,c,e){if(e){this.g=Math.round(e)}if(c){this.b=Math.round(c)}},render:function(c){var f=this.getLayerCount(),h=this.getDepth(),e=this.g,a=this.b;for(var d=f;d>0;d--){jQuery.each(this.objects,function(){var g=this.getVector().getX();var b=this.getVector().getY();if(jQuery.device.mode.landscape){this.getVector().setY(b+(e*(d/h)));this.getVector().setX(g-(a*(d/h)))}else{this.getVector().setX(g-(e*(d/h)));this.getVector().setY(b-(a*(d/h)))}this.render(c);this.getVector().setX(g);this.getVector().setY(b)})}}});